{% comment %}
Inner template for membership request actions.

Buttons only â€” modals live in _membership_request_shared_modals.html
(included once per page, not once per request row).

Expected context:
- membership_request: MembershipRequest
- pk_str: str
- membership_type_name: str
- requester_display: str
{% endcomment %}

{% url 'membership-request-approve' membership_request.pk as approve_url %}
{% with requester=requester_display|default:"(unknown)" %}
{% if membership_request.status == 'pending' %}
  {% with approve_title="Approve "|add:membership_type_name|add:" request" approve_prefix="Approve "|add:membership_type_name|add:" request from" %}
  <button
    type="button"
    class="btn btn-sm btn-success"
    data-toggle="modal"
    data-target="#shared-approve-modal"
    data-action-url="{{ approve_url }}"
    data-modal-title="{{ approve_title }}"
    data-request-id="{{ pk_str }}"
    data-request-target="{{ requester }}"
    data-membership-type="{{ membership_type_name }}"
    data-body-prefix="{{ approve_prefix }}"
    data-body-emphasis="{{ requester }}"
    data-body-suffix="?"
    title="Approve this request"
  >Approve</button>
  {% endwith %}
{% endif %}

{% if membership_request.status == 'on_hold' and show_on_hold_approve %}
  {% url 'membership-request-approve-on-hold' membership_request.pk as approve_on_hold_url %}
  {% with approve_title="Approve (Override) "|add:membership_type_name|add:" request" %}
  <button
    type="button"
    class="btn btn-sm btn-success"
    data-toggle="modal"
    data-target="#shared-approve-on-hold-modal"
    data-action-url="{{ approve_on_hold_url }}"
    data-modal-title="{{ approve_title }}"
    data-request-id="{{ pk_str }}"
    data-request-target="{{ requester }}"
    data-membership-type="{{ membership_type_name }}"
    title="Approve this on-hold request with committee override"
  >Approve (Override)</button>
  {% endwith %}
{% endif %}

{% if membership_request.status == 'pending' or membership_request.status == 'on_hold' %}
  {% url 'membership-request-reject' membership_request.pk as reject_url %}
  {% with reject_title="Reject "|add:membership_type_name|add:" request" %}
  <button
    type="button"
    class="btn btn-sm btn-danger"
    data-toggle="modal"
    data-target="#shared-reject-modal"
    data-action-url="{{ reject_url }}"
    data-modal-title="{{ reject_title }}"
    data-request-id="{{ pk_str }}"
    data-request-target="{{ requester }}"
    data-membership-type="{{ membership_type_name }}"
    title="Reject this request"
  >Reject</button>
  {% endwith %}
{% endif %}

{% if send_mail_can_add and membership_request.status == 'pending' %}
  {% url 'membership-request-rfi' membership_request.pk as rfi_url %}
  {% with rfi_title="Request information for "|add:membership_type_name|add:" request" %}
  <button
    type="button"
    class="btn btn-sm btn-outline-primary"
    title="Request information and put on hold"
    aria-label="Request for Information"
    data-toggle="modal"
    data-target="#shared-rfi-modal"
    data-action-url="{{ rfi_url }}"
    data-modal-title="{{ rfi_title }}"
    data-request-id="{{ pk_str }}"
    data-request-target="{{ requester }}"
    data-membership-type="{{ membership_type_name }}"
  >RFI</button>
  {% endwith %}
{% endif %}

{% if membership_request.status == 'pending' or membership_request.status == 'on_hold' %}
  {% url 'membership-request-ignore' membership_request.pk as ignore_url %}
  {% with ignore_title="Ignore "|add:membership_type_name|add:" request" ignore_prefix="Ignore "|add:membership_type_name|add:" request from" ignore_suffix="? This does not approve the membership, nor does it notify the user." %}
  <button
    type="button"
    class="btn btn-sm btn-outline-secondary"
    data-toggle="modal"
    data-target="#shared-ignore-modal"
    data-action-url="{{ ignore_url }}"
    data-modal-title="{{ ignore_title }}"
    data-request-id="{{ pk_str }}"
    data-request-target="{{ requester }}"
    data-membership-type="{{ membership_type_name }}"
    data-body-prefix="{{ ignore_prefix }}"
    data-body-emphasis="{{ requester }}"
    data-body-suffix="{{ ignore_suffix }}"
    title="Ignore this request"
  >Ignore</button>
  {% endwith %}
{% endif %}
{% endwith %}
